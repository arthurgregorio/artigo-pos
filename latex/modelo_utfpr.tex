\documentclass[12pt]{article}

\usepackage{sbc-template}
\usepackage[alf,abnt-emphasize=bf,bibjustif,recuo=0cm, abnt-etal-cite=2, abnt-etal-list=99]{abntcite}

\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{graphicx}
\usepackage{times}

\graphicspath{{imagens/}}     
     
\sloppy

\title{Proposta de arquitetura para aplicações que utilizam framework JSF}

\author{Arthur Pereira Gregório, André Roberto Ortoncelli}

\address{Universidade Tecnológica Federal do Paraná - UTFPR/CP\\
  Avenida Alberto Carazzai, 1640 - CEP: 86300-000\\
Cornélio Procópio-PR, Brazil
\nextinstitute
  Departamento de Computação
  \email{arthurshakal@gmail.com, ortoncelli@utfpr.edu.br}
}

\begin{document} 

\maketitle

\begin{abstract}
This article aims to present an architectural proposal for applications using JSF framework. In it we will see which key technologies we can use to build a simple architecture to maintain and fully standardized with the Java platform specifications Enthereprise Edition 7
\end{abstract}
     
\begin{resumo} 
Este artigo tem por objetivo apresentar um proposta de arquitetura para aplicações que utilizam o framework JSF. Nele veremos quais a principais tecnologias podemos usar para construir uma arquitetura simples de manter e totalmente padronizada com as especificações da plataforma Java Enthereprise Edition versão 7.
\end{resumo}

\section{Introdução}

Segundo pesquisa realizada pelo instituto \citeonline{tiobe:2015} em setembro de 2015, Java é a linguagem de programação mais utilizada no mundo. A linguagem tornou-se a escolha mais frequente entre as equipes de desenvolvimento de software e acaba também por seguir as tendências do mercado atual, onde segundo \citeonline{macoratti:2013} temos que projetar um software fácil de ajustar e barato de manter. 

Segundo \citeonline{xavier:2013} a definição de uma arquitura se inicia pela seleção dos elementos que comp\~oem a estrutura e como estes vão se relacionar, assim podemos dizer que a criação de uma arquitetura de software é algo que exige do arquiteto uma s\'erie de conhecimentos espec\'ificos sobre como estes componentes funcionam ou como podem interagir entre sí.

Criar uma arquitetura não \'e algo simples, pois mais importante do que saber integrar os compomentes selecionados, \'e saber identificar quais as poss\'iveis escolhas e quais os fatores que influenciam nestas escolhas \cite{xavier:2013}. 

Atualmente em aplicações web temos de atingir uma série de requisitos funcionáis através de nossas regras de negócios e ainda lidar com os requisitos não funcionais atendidos por nossa infraestrutura, proveniente da arquitetura na qual o sistema foi constituido. \textit{Java Entherprise Edition (JEE)} consiste de uma série de especificações bem detalhadas, dando uma receita de como deve ser implementado um software que faz cada um desses serviços de infraestrutura \cite{caelum:2015}. A figura \ref{componentes-jee} apresenta todos os componentes da plataforma JEE presentes na versão 7.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.3]{jee-7-components.png}
\caption{Componentes do framework JEE}
\label{componentes-jee}
\end{figure}

Seguindo a idéia de se utilizar um especificação padronizada e amplamente difundida como o JEE, diversos arquitetos de software hoje vem escolhendo o pacote de frameworks JEE para criação de suas aplicações. Dentre as opções disponíveis para uso dentro da plataforma, estão as especificações de persistência em banco de dados, transação, acesso remoto, web services, gerenciamento de threads, gerenciamento de conexões HTTP, cache de objetos, gerenciamento da sessão web, balanceamento de carga, entre outros.

O JSF, uma tecnologia integrante da especificação JEE incorpora características de um framework MVC (model-view-controller) para WEB e de um modelo de interfaces gráficas baseado em eventos \cite{pitanga:2015} serve como base para boa parte das aplicações Java que rodam em ambiente web.

De acordo com \citeonline{coelho:2013} JSF é um tecnologia muito útil e prática de ser aplicada, porém, muitas vezes mal utilizada pois não esta alinhada a uma estrutura de qualidae ou por falta de conhecimento de quem estruturou a aplicação. 

Assim, nas próximas seções será apresentada uma proposta de arquitetura padronizada através da especificação JavaEE para aplicações que utilizam a tecnologia JSF a fim de minimizar os impáctos com escolhas erradas de frameworks que possam influenciar na qualidade da sistema a ser construído.

\section{Trabalhos Relacionados}

Dificilmente uma empresa terá recursos suficientes para competir com a comunidade mundial. Em outras palavras, o arquiteto de software de uma corporação deve conhecer o máximo possível das opções de componentes e frameworks existentes no mercado para não cair no velho e já conhecido paradigma de tentar reinventar a roda \cite{franzini:2013}.

Deste modo, conhecer os principais componentes da arquitetura JavaEE antes de iniciar seu uso é indispensável para um arquiteto obter exito na tarefa de criar uma arquitetura duradoura.

\subsection{Servelets}

A API de servlets é um dos módulos presentes na plataforma JavaEE que é executado em um serivdor web possibilitando a aplicação que o estiver executando, receber e responder requisições através do protocolo HTTP, o \textit{HyperText Transfer Protocol} \cite{oracle:2011}.

\subsection{Context and Dependency Injection}

Segundo \citeonline{lopes:2012}, \textit{Context and Dependency Injection} ou CDI é a parte da especificação do JavaEE que cuida do controle e injeção dependências em nossos projetos, e caso a tecnologia de apresentação em uso seja o JSF versão 2, utilizar CDI é algo natural tendo em vista a integração entre as ferramentas.

\subsection{Java Persistence API}

JPA é um framework leve, baseado em \textit{Plain Old Java Objects} - POJOS - para persistir objetos Java \cite{medeiros:2012}. A Java Persistence API, não é apenas um framework para Mapeamento Objeto-Relacional ela também oferece integração direta com outros frameworks da tecnologia JavaEE, como por exemplo a API de Beans Validation que será descrita a seguir.

\subsection{Bean Validation}

\textit{Bean Validation} é a parte do framework Java responsável por validar objetos, membros deste objetos, métodos e construtores. Dentro de ambientes JavaEE, a API de \textit{Bean Validation} oferece ainda integração com outros serviços disponíveis na arquitetura como por exemplo a API de JPA \cite{durand:2014}.

\section{Desenvolvimento}

Nesta seção será abordada a integração entre as tecnologias previamente apresentadas na elaboração de um arquitetura totalmente compátivel com o padrão especificado pelas \textit{Java Specifications Requests (JSR)} integrantes do \textit{framework} JEE.

Para tal, um projeto \textit{open-source} foi disponibilizado no \textit{GitHub} como uma implementação funcional de uma arquitetura que utiliza totalmente a especificação JEE.

O projeto pode ser encontrado no link https://github.com/arthurgregorio/web-budget e sua documentação no link https://github.com/arthurgregorio/web-budget/blob/master/README.md.

\subsection{O Projeto}

O \textit{webBudget} é um sistema de controle financeiro pessoal para pequenas empresas ou pessoas que apenas querem ter um maior controle de suas finanças.

Inicialmenteo \textit{webBudget} foi desenvolvido utilizando tecnologias não padronizadas da plataforma Java para web, tais como \textit{Spring Framework}. Com passar do tempo houve-se então a necessidade de padronização da arquitetura e também aprimoramentos que só poderiam ser encontrados na plataforma JEE, sendo eles: CDI e API de Eventos \cite{gregorio:2015}.

Iniciando o processo de migração houve a necessidade da criação e definição de uma arquitetura, mais precisamente a criação de uma estrutura para então dentro dela acomodar cada impementação dos componentes do \textit{framework} JEE.

\subsection{Estrutura}

A estrutura da arquitetura segue uma organização em camadas conforme a proposta do \textit{Model Driven Design (MDD)} apresentado por Eric Evans em seu livro sobre \textit{Domain Driven Design (DDD)}, que basicamente estabelece um conjunto de práticas para a construção de um software que expresse de maneira clara o problema em questão \cite{evans:2009}

\subsubsection{MDD}

Segundo \citeonline{cukier:2010} o MDD divide as estruturas do software em quatro camadas básicas:

\begin{itemize}
\item Camada de interface com o usuário, que como o próprio nome sugere, é responsável pela parte de iteração com as ações do usuário
\item Camada de aplicação, realiza a conexão entre a camada de usuário e as camadas inferiores, não deve possuir regras de negócio
\item Camada de Domínio, a representação dos conceitos, regras e lógicas do software, ou seja, onde o DDD se aplica
\item Camada de Infra-estrutura, é o apoio para as camadas superiores, aqui encontram-se métodos para acesso a dados, envio de emails entre outros
\end{itemize}

Na figura \ref{mdd-camadas} pode-se observar o fluxo de iteração entre cada uma das camadas bem como sua organização de maneira visual.

\begin{figure}[!ht]
\centering
\includegraphics[scale=0.8]{ddd-layers.jpg}
\caption{Estrutura MDD}
\label{mdd-camadas}
\end{figure}

\subsection{Componentes por camada}

É natural que a divisão em camadas alem de promover uma melhor organização projeto também reduz o acoplamento entre as partes do sistema, fazendo com que as camadas conversem apenas com outras camadas próximas.

Desta forma, para cada divisão da arquitetura proposta, um ou mais \textit{framework} do \textit{stack} JEE pode estar sendo utilizado dentro da camada em questão.

\subsubsection{Camada de Interface}

Como camada de interface, a escolha foi guiada pela produtividade e simplicidade oferecida pela implementação orientada a componentes oferecida pelo \textit{Java Server Faces} (JSF) que através da JSR-314 é o padrão para construção de server-side interfaces de maneira rápida e simples \cite{oracle:2015}.

Como componente auxiliar a este processo de construção, foi utilizado o \textit{framework}  de componentes para JSF \textit{Primefaces}, que por ser construído se baseando na especificação do \textit{framework} JSF também é padronizado com JEE.

\subsubsection{Camada de Domínio}

Na camada de domínio existem pode-se verificar a atuação de três \textit{frameworks}, sendo eles: 

\begin{enumerate}
\item Hibernate, responsável pela implementação do mapemaamento objeto-relacional entre o banco de dados e o modelo de domínio da aplicação
\item Picketlink, responsável pela atuação na segurança da aplicação, onde através de um modelo de segurança integrado ao domínio provê autênticação e autorização aos usuários
\item CDI, que em conjunto com as classes da camada de aplicação provê a inversão de controle e também injeção contexto e dependências para a aplicação
\end{enumerate}

\subsubsection{Camada de Aplicação}

Na camada de aplicação existe basicamente a outra metade do \textit{framework} JSF provida pelo CDI, as \textit{controllers} que servem como geranciadores da interface gráfica.

Estas \textit{controllers} também conhecidas como \textit{managed beans} tem por função ser o local onde as páginas irão buscar as informações para executar uma operação na tela \cite{coelho:2013}.

Nesta camada também pode ser encontrada algumas funções integradas via CDI com o contexto de segurança gerenciado pelo \textit{Picketlink}, mais especificamente no que tange o processo de autenticação e autorização de acesso aos menus do sistema.

\subsubsection{Camada de Infra-estrutura}

Na camada de infra-estrutura encontram-se as configurações de \textit{frameworks} já citados, como o caso do picketlink, e também os meios necessários para que a aplicação consiga enviar e-mails através da API de e-mails do JEE, o Java Mail.

\section{Conclusão}

Segundo \citeonline{baxter:2010} toda aplicação precisa basicamente do mesmo conjunto de recursos: persistência, injeção de dependências, uma boa camada de visão entre outras. E tudo isso é possivel de se fazer apenas com os \textit{frameworks} do \textit{stack} JEE.

Como pode ser observado no \textit{webBudget}, toda a sua estrutura se mantem padronizada com o que a especificação padrão da tecnologia prega, utilizando apenas os frameworks tidos como implementação de refeência para cada componente da plataforma.

\newpage
\bibliography{modelo_utfpr} 

\end{document}